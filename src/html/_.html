<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mnengwa Studios</title>

    <link rel="shortcut icon" href="/static/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg" />
    <link rel="icon" type="image/png" sizes="96x96" href="/static/favicon-96x96.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Mnengwa" />

    <link rel="manifest" href="/static/site.webmanifest" />
    <link rel="stylesheet" href="@css/main.css" />

    <script type="text/javascript">
        // Theme default
        document.addEventListener("DOMContentLoaded", function () {
            const htmlEl = document.querySelector('html');
            const themeToggleEl = document.getElementById('_theme-toggle');
            const theme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? "dark" : "light"

            htmlEl && htmlEl.setAttribute('data-theme', theme);

            window.toggleTheme = function toggleTheme() {
                const theme = htmlEl.dataset.theme === "dark" ? "light" : "dark";
                htmlEl && htmlEl.setAttribute('data-theme', theme);
            };
        });

        // Bouncing ball animation
        document.addEventListener("DOMContentLoaded", function () {
            const space = document.querySelector("#dot-matrix-space");
            const ball = document.querySelector("#dot-matrix-particle");

            const R = 20; // radius
            const SPEED = 0.45;
            const BOUNCE_DAMP = 0.98;
            const ANGLE_DRIFT = 0.0025;

            let x, y, vx, vy;

            function initBall() {
                const w = space.clientWidth;
                const h = space.clientHeight;

                const side = Math.floor(Math.random() * 4);

                if (side === 0) { x = Math.random() * w; y = R; }
                if (side === 1) { x = w - R; y = Math.random() * h; }
                if (side === 2) { x = Math.random() * w; y = h - R; }
                if (side === 3) { x = R; y = Math.random() * h; }

                let angle = Math.atan2(h / 2 - y, w / 2 - x);
                angle += (Math.random() - 0.5) * 0.5;

                vx = Math.cos(angle) * SPEED;
                vy = Math.sin(angle) * SPEED;
            }

            initBall();

            function update() {
                const w = space.clientWidth;
                const h = space.clientHeight;

                // drift wobble
                const drift = (Math.random() - 0.5) * ANGLE_DRIFT;
                const cos = Math.cos(drift);
                const sin = Math.sin(drift);

                const vxNew = vx * cos - vy * sin;
                const vyNew = vx * sin + vy * cos;

                vx = vxNew;
                vy = vyNew;

                x += vx;
                y += vy;

                // soft bounce
                if (x < R) { x = R; vx = -vx * BOUNCE_DAMP; }
                if (x > w - R) { x = w - R; vx = -vx * BOUNCE_DAMP; }
                if (y < R) { y = R; vy = -vy * BOUNCE_DAMP; }
                if (y > h - R) { y = h - R; vy = -vy * BOUNCE_DAMP; }

                ball.style.transform = `translate(${x - R}px, ${y - R}px)`;
            }

            function loop() {
                update();
                requestAnimationFrame(loop);
            }

            loop();
        });
    </script>
</head>

<body>
    <header id="_header">
        <div id="_header-brand">
            <img class="darker logo" data-render="vector" src="@images/brand/logo-black.svg" alt="MS" />
            <img class="lighter logo" data-render="vector" src="@images/brand/logo-white.svg" alt="MS" />
        </div>

        <nav id="_header-menu">
            <a href="/">
                Home
                <img class="icon" data-render="vector" alt="ðŸ " src="@images/icons/house.svg" />
            </a>
            <a href="/works">
                Works
                <img class="icon" data-render="vector" alt="ðŸ—‚ï¸" src="@images/icons/drafting-compass.svg" />
            </a>
            <a href="/about">
                About
                <img class="icon" data-render="vector" alt="ðŸ’¼" src="@images/icons/briefcase-business.svg" />
            </a>
        </nav>

        <div id="_header_extra">
            <button id="_theme-toggle" onclick="toggleTheme()">
                <img class="darker icon" data-render="vector" alt="ðŸŒ™" src="@images/icons/moon.svg" />
                <img class="lighter icon" data-render="vector" alt="â˜€ï¸" src="@images/icons/sun.svg" />
            </button>
        </div>
    </header>

    <!-- @content -->

    <script type="text/javascript">

    </script>
</body>

</html>